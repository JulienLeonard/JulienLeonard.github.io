var canvasname="candles",colgrid=null,quadtree=null,lastpatternid=0,patterns=[],canvas=null,gl=null,ratios=[.9071813197374257,.9964408269135472,.18097793598704875,.6961701343283849,.5314476571657917,.040773985460761,.2883736390100669,.6957508421948883,.48440476948600486,.3909607512834299,.8773468206065459,.5680139342173999,.6101923918398993,.5035296531876221,.8228811243655538,.163057211862438,.5025597719953208,.5220879253568537,.731761472640448,.7150706680096084,.19271723748776934,.9986104569391396,
.6459497761195292,.4778872409266826,.8508582547543841,.3746876569346933,.37545010139022494,.1898540655103764,.8772790328959371,.42870588201503546];ratios=ratios.map(function(b){return sample(.5,1.2,b)});var viewbox0=null,errormargin=1E-5;function rootseedratio(b,a){return plug(new Circle(0,-b*a,b*a),new Circle(0,a,a),-1)}
function context(){function b(){d=1E6>d?Math.floor(1.03*d):0;if(1E6>a&&0<patterns.length){var c=patterns[0].iter(quadtree,d),e=c[0];c=c[1];if(0<c){gl.coords=Array(15*c);gl.coordindex=0;for(var f=gl.nnewcircles=0;f<c;f++){var g=e[f],h=g.r-.01;0<h&&drawcircle(gl,g.x,g.y,h)}gl.batchs.push(createnewbatch(gl))}a+=d}viewbox0=expandviewbox(viewbox0,1);gl.viewbox0=squareviewbox(expandviewbox(viewbox0,1));resetviewbox(gl);1E6<=a&&(e=(new Date).getTime()-k,console.log("iter duration ",e),console.log("xmin",
0,"ymin",0,"xmax",0,"ymax",0));return relaunchloop(1E6>a,b)}initrandomseed(0);initcanvas(canvasname);var a=0,k=(new Date).getTime();0==patterns.length&&(seed=rootseedratio(ratios[0],.1),patterns.push(new bpatternpackingalternate([seed],ratios)));quadtree=new MetaQuadTree(-200,-200,200,200,2,errormargin);viewbox0=mergeviewboxes(circleviewbox(new Circle(0,0,30)),circleviewbox(new Circle(0,0,1)));console.log("init viewbox0",viewbox0);var d=100;return b}startanim(context());
